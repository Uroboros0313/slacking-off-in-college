
# itemCF
基于物品的协同过滤就是根据用户历史选择物品的行为，通过物品间的相似度，给用户推荐其他物品。

## 计算流程

### 1. 计算物品之间的相似度。

假如某两个物品历史共同被许多用户喜欢，则说明这两个物品是相似的。

假设喜欢物品$i$的用户数为$N(i)$, 喜欢物品$b$的用户数为$N(j)$, 那么$i$与$j$的相似度为：
$$sim_{i,j} = \frac{|N(i)\cap N(j)|}{N(i)}$$

- 修正: 假如某个物品被是热门物品, 计算出来会和很多物品高相似性

$$sim_{i,j} = \frac{|N(i)\cap N(j)|}{\sqrt{|N(i)||N(j)|}}$$

### 2. 根据物品的相似度和用户的历史行为给用户推荐

获得了物品的相似度后, 则根据以下公式来计算用户$u$对物品$j$的兴趣：

$$p_{u,j}= \sum_{i∈N(u)\cap S(j,K)}W_{j,i}r_{u, i}$$
​
$N(u)$是用户喜欢的物品的集合, $S(j,K)$是和物品$j$最相似的$K$个物品的集合, $W_{j,i}$是物品$j$和$i$的相似度，$r_{u,i}$是用户$u$对物品$i$的兴趣(ratings)。

即在用户$u$的访问列表与物品$i$最相似的$K$个物品中求并集, 并求和$ratings\times sim$

## 提升方法

### IUF

活跃用户的贡献(访问了大量商品)相比只看少数的用户的贡献低

则计算相似度时惩罚活跃用户

$$W_{i,j} = \frac{\sum_{u\in N(i)\cap N(j)}\frac{1}{ log1+|N(u)|}}{\sqrt{|N(i)||N(j)|}}$$

### Norm

假设有一个类，类内相似度均为$[0.8, 1]$之间; 另一个类，类内相似度均为$[0.1, 0.3]$之间

那么加权之后第一个类被推荐的概率会更大

- 相似度矩阵处理: 

$$W_{i,j}'=\frac{W_{i,j}}{\underset{j}{max} W_{i,j}}$$

# userCF

## 计算流程

### 1. 计算物品之间的相似度。

假如某两个物品历史共同被许多用户喜欢，则说明这两个物品是相似的。

假设喜欢物品$i$的用户数为$N(i)$, 喜欢物品$b$的用户数为$N(j)$, 那么$i$与$j$的相似度为：
$$sim_{i,j} = \frac{|N(i)\cap N(j)|}{N(i)}$$

- 修正: 假如某个物品被是热门物品, 计算出来会和很多物品高相似性

$$sim_{i,j} = \frac{|N(i)\cap N(j)|}{\sqrt{|N(i)||N(j)|}}$$

### 2. 计算推荐

$$p_{u,j}= \sum_{v∈N(i)\cap S(u,K)}W_{u,v}r_{v, i}$$
​
$N(i)$是点击商品$i$的用户集合, $S(u,K)$是和用户$u$最相似的$K$个用户的集合, $W_{u,v}$是用户$u$和$v$的相似度，$r_{v,i}$是用户$v$对物品$i$的兴趣(ratings)。